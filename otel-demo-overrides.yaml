default:
  env:
   - name: OTEL_SERVICE_NAME
     valueFrom:
       fieldRef:
         apiVersion: v1
         fieldPath: "metadata.labels['app.kubernetes.io/component']"
   - name: NODE
     valueFrom:
       fieldRef:
         fieldPath: status.hostIP
   - name: OTEL_COLLECTOR_NAME
     value: "$(NODE)"

components:
  kafka:
    resources:
      limits:
        memory: 1G
    env:
      - name: KAFKA_ADVERTISED_LISTENERS
        value: PLAINTEXT://kafka:9092
      - name: OTEL_EXPORTER_OTLP_ENDPOINT
        value: http://$(OTEL_COLLECTOR_NAME):4318
      - name: KAFKA_HEAP_OPTS
        value: -Xmx400M -Xms400M -XX:UseSVE=0 -XX:+UnlockDiagnosticVMOptions
      - name: KAFKA_GC_LOG_OPTS
        value: -Xloggc:/tmp/gc.log -verbose:gc -XX:+PrintGCDetails
  accounting:
    resources:
      limits:
        memory: 240Mi
  ad:
    resources:
      limits:
        memory: 500Mi
    env:
      - name: AD_PORT
        value: "8080"
      - name: FLAGD_HOST
        value: flagd
      - name: FLAGD_PORT
        value: "8013"
      - name: OTEL_EXPORTER_OTLP_ENDPOINT
        value: http://$(OTEL_COLLECTOR_NAME):4318
      - name: OTEL_LOGS_EXPORTER
        value: otlp
      - name: JAVA_OPTS
        value: -XX:UseSVE=0
  email:
    resources:
      limits:
        memory: 200Mi
  fraud-detection:
    resources:
      limits:
        memory: 500Mi
  product-catalog:
    resources:
      limits:
        memory: 100Mi

opensearch:
  enabled: false

grafana:
  enabled: false

prometheus:
  enabled: false

jaeger:
  enabled: false

opentelemetry-collector:
  enabled: false
